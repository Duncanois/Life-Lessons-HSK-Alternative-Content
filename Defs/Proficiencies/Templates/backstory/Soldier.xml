<?xml version="1.0" encoding="utf-8" ?>

<Defs>
  <LifeLessons.BackstoryProficiencyTemplateDef Abstract="True" Name="SoldierBase">
    <applyToUnpatchedStory>true</applyToUnpatchedStory>
    <cost>10</cost>
    <heuristics>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>4</value>
        <description>
          <containsAny>
            <li>soldier</li>
            <li>warrior</li>
            <li>veteran</li>
            <li>hero</li>
            <li>fighter</li>
            <li>gladiator</li>
            <li>combat</li>
            <li>war</li>
            <li>medic</li>
          </containsAny>
        </description>
      </li>

      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>8</value>
        <title>
          <containsAny>
            <li>soldier</li>
            <li>marine</li>
            <li>gunner</li>
            <li>sniper</li>
            <li>knight</li>
            <li>warrior</li>
            <li>veteran</li>
            <li>hero</li>
            <li>fighter</li>
            <li>gladiator</li>
            <li>combat</li>
          </containsAny>
        </title>
      </li>

      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Melee</skillDef>
          <greaterThan>1</greaterThan>
        </skillMod>
      </li>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Melee</skillDef>
          <greaterThan>3</greaterThan>
        </skillMod>
      </li>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Melee</skillDef>
          <greaterThan>5</greaterThan>
        </skillMod>
      </li>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Shooting</skillDef>
          <greaterThan>1</greaterThan>
        </skillMod>
      </li>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Shooting</skillDef>
          <greaterThan>3</greaterThan>
        </skillMod>
      </li>
      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>1</value>
        <skillMod>
          <skillDef>Shooting</skillDef>
          <greaterThan>5</greaterThan>
        </skillMod>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>TribalSoldier</defName>
    <package>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">ShortBlades</li>
            <li MayRequire="GhostData.lifelessons.martial">Bows</li>
            <li MayRequire="GhostData.lifelessons.martial">Staves</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>1</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Staves</li>
            <li MayRequire="GhostData.lifelessons.martial">Bows</li>
            <li MayRequire="GhostData.lifelessons.martial">ShortBlades</li>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">NeolithicExotics</li>
          </options>
          <rolls>3</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Neolithic</matches>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>MedievalSoldier</defName>
    <package>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Longswords</li>
            <li MayRequire="GhostData.lifelessons.martial">Maces</li>
            <li MayRequire="GhostData.lifelessons.martial">Flails</li>
            <li MayRequire="GhostData.lifelessons.martial">Axes</li>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">Hammers</li>
            <li MayRequire="GhostData.lifelessons.martial">Polearms</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>1</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Flails</li>
            <li MayRequire="GhostData.lifelessons.martial">Maces</li>
            <li MayRequire="GhostData.lifelessons.martial">Longswords</li>
            <li MayRequire="GhostData.lifelessons.martial">MedievalExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">Axes</li>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">Hammers</li>
            <li MayRequire="GhostData.lifelessons.martial">Polearms</li>
            <li MayRequire="GhostData.lifelessons.martial">Bows</li>
          </options>
          <rolls>4</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">GreatWeapons</li>
            <li MayRequire="GhostData.lifelessons.martial">Crossbows</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">PrimitiveFirearms</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.15</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Medieval</matches>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>MedievalBowman</defName>
    <cost>20</cost>
    <overridesTemplates>
      <li>MedievalSoldier</li>
    </overridesTemplates>
    <package>
      <proficiencies>
        <li MayRequire="GhostData.lifelessons.martial">Bows</li>
      </proficiencies>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Crossbows</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.75</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Flails</li>
            <li MayRequire="GhostData.lifelessons.martial">Maces</li>
            <li MayRequire="GhostData.lifelessons.martial">Longswords</li>
            <li MayRequire="GhostData.lifelessons.martial">Axes</li>
            <li MayRequire="GhostData.lifelessons.martial">Hammers</li>
            <li MayRequire="GhostData.lifelessons.martial">Polearms</li>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">MedievalExotics</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.75</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">PrimitiveFirearms</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.15</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Medieval</matches>
      </li>

      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>10</value>
        <description>
          <containsAny>
            <li>bowman</li>
            <li>archer</li>
            <li>hunt</li>
          </containsAny>
        </description>
        <or Class="LifeLessons.BackstoryHeuristic">
          <backstorySlot>Adulthood</backstorySlot>
          <title>
            <containsAny>
              <li>bowman</li>
              <li>archer</li>
              <li>hunter</li>
            </containsAny>
          </title>
        </or>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>MedievalKnight</defName>
    <cost>20</cost>
    <overridesTemplates>
      <li>MedievalBowman</li>
      <li>MedievalSoldier</li>
    </overridesTemplates>
    <package>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Longswords</li>
            <li MayRequire="GhostData.lifelessons.martial">Maces</li>
            <li MayRequire="GhostData.lifelessons.martial">Flails</li>
            <li MayRequire="GhostData.lifelessons.martial">Axes</li>
            <li MayRequire="GhostData.lifelessons.martial">Hammers</li>
            <li MayRequire="GhostData.lifelessons.martial">Polearms</li>
          </options>
          <rolls>2</rolls>
          <chancePerRoll>1</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Spears</li>
            <li MayRequire="GhostData.lifelessons.martial">ShortBlades</li>
            <li MayRequire="GhostData.lifelessons.martial">MedievalExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">Longswords</li>
            <li MayRequire="GhostData.lifelessons.martial">Maces</li>
            <li MayRequire="GhostData.lifelessons.martial">Flails</li>
            <li MayRequire="GhostData.lifelessons.martial">Axes</li>
            <li MayRequire="GhostData.lifelessons.martial">Hammers</li>
            <li MayRequire="GhostData.lifelessons.martial">Polearms</li>
          </options>
          <rolls>4</rolls>
          <chancePerRoll>0.6</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">GreatWeapons</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.85</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Crossbows</li>
            <li MayRequire="GhostData.lifelessons.martial">Bows</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Medieval</matches>
      </li>

      <li Class="LifeLessons.BackstoryHeuristic">
        <backstorySlot>Adulthood</backstorySlot>
        <value>10</value>
        <description>
          <containsAny>
            <li>knight</li>
          </containsAny>
        </description>
        <or Class="LifeLessons.BackstoryHeuristic">
          <backstorySlot>Adulthood</backstorySlot>
          <title>
            <containsAny>
              <li>knight</li>
            </containsAny>
          </title>
        </or>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>IndustrialSoldier</defName>
    <requiredExtraTemplates>
      <li>SoldierFirstaid</li>
    </requiredExtraTemplates>
    <package>
      <proficiencies>
        <li MayRequire="GhostData.lifelessons.martial">Rifles</li>
      </proficiencies>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">HandheldExplosives</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.9</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Submachineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Pistols</li>
            <li MayRequire="GhostData.lifelessons.martial">Shotguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Rifles</li>
            <li MayRequire="GhostData.lifelessons.martial">Machineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">IndustrialExotics</li>
          </options>
          <rolls>4</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">ArtilleryTraining</li>
            <li MayRequire="GhostData.lifelessons.martial">Rockets</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.4</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Industrial</matches>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>SpacerSoldier</defName>
    <requiredExtraTemplates>
      <li>SoldierFirstaid</li>
    </requiredExtraTemplates>
    <package>
      <proficiencies>
        <li MayRequire="GhostData.lifelessons.martial">ChargeWeapons</li>
        <li MayRequire="GhostData.lifelessons.martial">Rifles</li>
        <li>EVATraining</li>
      </proficiencies>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">HandheldExplosives</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.9</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Pistols</li>
            <li MayRequire="GhostData.lifelessons.martial">IndustrialExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">Submachineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Shotguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Machineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">SpacerExotics</li>
          </options>
          <rolls>4</rolls>
          <chancePerRoll>0.6</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">PowerArmorUser</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">CombatJump</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.4</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">Rockets</li>
            <li MayRequire="GhostData.lifelessons.martial">ArtilleryTraining</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.35</chancePerRoll>
        </li>
      </conditionalProficiencies>

    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Spacer</matches>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

  <LifeLessons.BackstoryProficiencyTemplateDef ParentName="SoldierBase">
    <defName>UltraSoldier</defName>
    <requiredExtraTemplates>
      <li>SoldierFirstaid</li>
    </requiredExtraTemplates>
    <package>
      <proficiencies>
        <li MayRequire="GhostData.lifelessons.martial">ChargeWeapons</li>
        <li MayRequire="GhostData.lifelessons.martial">Rifles</li>
        <li MayRequire="GhostData.lifelessons.martial">PlasmaFirearms</li>
        <li>EVATraining</li>
      </proficiencies>
      <conditionalProficiencies>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">HandheldExplosives</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.9</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">IndustrialExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">Pistols</li>
            <li MayRequire="GhostData.lifelessons.martial">Submachineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Shotguns</li>
            <li MayRequire="GhostData.lifelessons.martial">Machineguns</li>
            <li MayRequire="GhostData.lifelessons.martial">SpacerExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">UltraExotics</li>
            <li MayRequire="GhostData.lifelessons.martial">PlasmaMelee</li>
          </options>
          <rolls>5</rolls>
          <chancePerRoll>0.6</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">PowerArmorUser</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.8</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">CombatJump</li>
          </options>
          <rolls>1</rolls>
          <chancePerRoll>0.75</chancePerRoll>
        </li>
        <li>
          <options>
            <li MayRequire="GhostData.lifelessons.martial">ArtilleryTraining</li>
            <li MayRequire="GhostData.lifelessons.martial">Rockets</li>
          </options>
          <rolls>2</rolls>
          <chancePerRoll>0.5</chancePerRoll>
        </li>
      </conditionalProficiencies>
    </package>
    <heuristics>
      <li Class="LifeLessons.TechLevelHeuristic">
        <required>true</required>
        <matches>Ultra</matches>
      </li>
    </heuristics>
  </LifeLessons.BackstoryProficiencyTemplateDef>

</Defs>